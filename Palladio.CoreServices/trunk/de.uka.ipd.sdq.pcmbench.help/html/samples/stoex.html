<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

  
  
  <title>Untitled</title>
  <meta content="Evrsoft First Page" name="GENERATOR">
</head>



<body>

  
<h1>Stochastical Expressions</h1>


  
<h2>Introduction</h2>


  
<p>When modelling with the Palladio Component Model, you can use stochastical expression to specify</p>


  
<ul>

    <li>resource demands</li>


    <li>characterisations of variables</li>


    <li>guards on branch transitions</li>


    <li>number of loop iterations</li>

  
</ul>


  
<p>Stochastical Expressions can include</p>


  
<ul>

    <li>probability distributions (probability mass functions, probability density functions)</li>


    <li>constants (integer, real numbers, strings)</li>


    <li>arithmetic expressions (+,-,*,/,%)</li>


    <li>boolean expressions (AND, OR, NOT)</li>


    <li>variable characterisation references
(array.NUMBER_OF_ELEMENTS, x.BYTESIZE), which evaluate to probability
distributions or constants</li>

    <li>a number of predefined functions (see below)</li>

  
</ul>


  
<h2>Examples</h2>


  
<table style="width: 100%;" border="1" cellpadding="0" cellspacing="0">

    <tbody>

      <tr>

        <td style="width: 472px;"><small><font face="Courier New, Courier, Mono"> DoublePDF[(1.0;0.3)(1.5;0.2)(2.0;0.5)]</font></small></td>


        <td style="width: 478px;">
          
      <ul>

            <li>Specifies a time interval as boxed probability density function</li>

            <li>the probability of the time being between 0 and 1 second is 30 percent (0.3)</li>


            <li>the probability of the time being between 1 and 1.5 seconds is 20 percent (0.2)</li>


            <li>the&nbsp;probability of the time being between 1.5 and 2 seconds is 50 percent (0.5)</li>


            <li>the probabilty of&nbsp;the time being longer than 2 seconds is 0 percent.</li>


            <li>all probabilities sum up to&nbsp;1.0&nbsp;</li>

          
      </ul>

        </td>

      </tr>


      <tr>

        <td style="width: 472px;"><small><font face="Courier New">IntPMF[(27;0.1)(28;0.2)(29;0.6)(30;0.1)]</font></small></td>


        <td style="width: 478px;">
          
      <ul>

            <li>Specifies the number of &nbsp;executing a loop as a probability mass function (PMF)</li>
        <li>the probability of executing the loop exactly 27 times is 10 percent (0.1)</li>

          
      </ul>

        </td>

      </tr>


      <tr>

        <td style="width: 472px; font-family: monospace;">DoublePMF[(22.3;0.4)(24.8;0.6)]</td>


        <td style="width: 478px;">
      <ul>
        <li>Specifies a floating point variable charcterisation as a probability mass function (PMF)</li>
        <li>the probability of the variable taking the value 22.3 is 40 percent (0.4)</li>
      </ul>
      </td>

      </tr>


      <tr>

        <td style="width: 472px; font-family: monospace;">EnumPMF[("circle";0.2) ("rectangle";0.3)("triangle";0.5)]</td>


        <td style="width: 478px;">
      <ul>
        <li>Specifies a probability mass function over the domain of a parameter</li>
        <li>Graphics-Objects can either be circles, rectangles, or triangles with the respective probabilities</li>
      </ul>
      </td>

      </tr>


      <tr>

        <td style="width: 472px; font-family: monospace;">BoolPMF[(false;0.3)(true;0.7)]</td>


        <td style="width: 478px;">
      <ul>
        <li>Specifies a probabilty mass function for a boolean guard on a branch transition</li>
        <li>The guard is false with a probability of 30 percent and true with a probablity of 70 percent.</li>
      </ul>
      </td>

      </tr>
    <tr>
      <td style="font-family: monospace;">23</td>
      <td>
      <ul>
        <li>An integer constant</li>
        <li>Can be used for example for loop iteration numbers, variable characterisations or resource demands</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">42.5</td>
      <td>
      <ul>
        <li>An floating point number constant</li>
        <li>Can be used for variable characterisations and resource demands (not for loop iterations)</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td><span style="font-family: monospace;">"Hello World!"</span></td>
      <td>
      <ul>
        <li>A string constant</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">number.VALUE</td>
      <td>
      <ul>
        <li>Characterises the value of the variable "number"</li>
        <li>You can assign a constant or probabilty function to a characterisation</li>
        <li>For example, number.VALUE = 762.3 or number.VALUE = <span style="font-family: monospace;">DoublePMF[(22.3;0.4)(24.8;0.6)]</span></li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">graphic.TYPE</td>
      <td>
      <ul>
        <li>Characterises the type of the variable "graphic"</li>
        <li>For example: graphc.TYPE = "polygon"</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td><span style="font-family: monospace;">file.BYTESIZE</span></td>
      <td>
      <ul>
        <li>Characterises the size of variable "file" in bytes</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">array.NUMBER_OF_ELEMENTS</td>
      <td>
      <ul>
        <li>Characterises the number of elements in the collection variable "array"</li>
        <li>For example: &nbsp;array.NUMBER_OF_ELEMENTS = <font face="Courier New" size="2">IntPMF[(15;0.1)(16;0.9)]</font></li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">set.STRUCTURE</td>
      <td>
      <ul>
        <li>Characterises the structure of the collection variable "set"</li>
        <li>For example: sorted, unsorted</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td style="font-family: monospace;">2+4, 34.3-1, 88.2*1.2, 14/2, 60%12<br>
      <br>
number.VALUE * 15, file.BYTESIZE / 2</td>
      <td>
      <ul>
        <li>Arithmetric expressions can combine constants</li>
        <li>Allowed are + (addition), - (substraction), * (multiplication), / (division), % (modulo)</li>
        <li>Arithmetric expressions may include variable characterisations</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td><small>
    
      
        <font face="Courier New, Courier, Mono"> DoublePDF[(1.0;0.3)(1.5;0.2)(2.0;0.5)] * 15<br>
      </font>
    
      
        <font face="Courier New, Courier, Mono"><br>
 IntPMF[(1124.0;0.3)(1125.5;0.7)] + 2.5<br>
      </font>
    
      
        <font face="Courier New, Courier, Mono"><br>
 DoublePDF[(12.0;0.9)(15;0.1)] - </font>
    
      
        <font face="Courier New, Courier, Mono"> DoublePDF[(128.0;0.3)(256;0.2)(512.0;0.5)]</font></small></td>
      <td>
      <ul>
        <li>Arithmetric expressions can also combine probability functions</li>
      </ul>
      </td>
    </tr>
    <tr>
      <td><span style="font-family: monospace;">number.VALUE &lt; 20, foo.NUMBER_OF_ELEMENT == 12,<br>
blah.VALUE &gt;= 108.3 AND fasel.TYPE == "mytype"</span></td>
      <td>
      <ul>
        <li>Boolean expressions evalute to true or false</li>
        <li>You can use them on guarded branch transitions</li>
        <li>Valid operators are &gt; (greater), &lt; (less), == (equal), &lt;&gt;(not equal), &gt;= (greater equal), &lt;= (less equal), AND, OR, NOT</li>
      </ul>
      </td>
    </tr>

    
  </tbody>
  
</table>


<h2>Predefined Functions</h2>  

A number of predefined functions can be used in the stochastic expressions. There are two types of functions: Predefined probability functions and auxiliary functions. The functions are listed in the following by their keyword in the stochastic expression. 

<h3>Predefined probability functions</h3>
All functions are evaluated internally with the umontreal.iro.lecuyer.randvar and umontreal.iro.lecuyer.probdist packages. The passed parameters must be double values or be evaluated to double values. 

<ul>

	<li><font face="Courier New, Courier, Mono">Exp</font>:
	The exponential distribution with one rate parameter lambda &gt; 0. Note that the mean of this function is 1&#47;lambda.</li>

	<li><font face="Courier New, Courier, Mono">Norm</font>:
	The normal distribution with two parameters mean mu and standard deviation sigma.</li>

	<li><font face="Courier New, Courier, Mono">UniDouble</font>:
	The (continuous) uniform distribution over the interval &#93;a, b&#91;, where a and b are real numbers with a  &gt; b.</li>

	<li><font face="Courier New, Courier, Mono">UniInt</font>:
	The uniform distribution over integers, over the interval &#91;i, j &#93;.</li>

	<li><font face="Courier New, Courier, Mono">Pois</font>:
	The Poisson distribution with one parameter lambda &gt; 0 equal to the mean.</li>

	<li><font face="Courier New, Courier, Mono">Binom</font>:
	The binomial distribution with parameters n and p. n is a positive integer, and 0 &lt;= p &lt;= 1. </li>

	<li><font face="Courier New, Courier, Mono">Lognorm</font>:
	The lognormal distribution with parameters mu and sigma. The parameter sigma &gt; 0. </li>

	<li><font face="Courier New, Courier, Mono">LognormMoments</font>:
	An alternative way of writing the lognormal distribution. The parameters are the mean mu and the coefficient of variance c.</li>

	<li><font face="Courier New, Courier, Mono">Gamma</font>:
	The gamma distribution with shape parameter alpha &gt; 0 and scale parameter beta &gt; 0. </li>

	<li><font face="Courier New, Courier, Mono">GammaMoments</font>:
	An alternative way of writing the Gamma distribution. The parameters are the mean mu and the coefficient of variance c.</li>

</ul>

     
		   

<h3>Auxiliary functions</h3>
   
<ul>
	<li><font face="Courier New, Courier, Mono">Trunc</font>:
	This function rounds off its argument as defined by java.lang.Math.floor. If the argument is a DoublePDF, this results in an IntPMF. This function is supported by all solvers if the argument is a DoublePDF or a double value. Only the SimuCom simulation supports arbitrary arguments.  </li>
	<li><font face="Courier New, Courier, Mono">Round</font>:
	This functions rounds its argument as defined by java.lang.Math.round. If the argument is a DoublePDF, this results in an IntPMF. This function is only supported in the SimuCom simulation.</li>
</ul>

<h3>Examples</h3>
<font face="Courier New, Courier, Mono">

<ul>
	<li>Exp(0.3)</li>
	<li>Lognorm(0.3,c.VALUE)</font> Note that c.VALUE must evaluate to a double value.<font face="Courier New, Courier, Mono"></li>
        <li>Trunc(DoublePDF[(12.0;0.9)(15;0.1)])</li>
</ul>

</font>

<h2>BNF-Grammar</h2>


  
<h3>Parser:</h3>
<p align="left"><font size="3"><code><font size="3"><font size="3"><font size="3"><font size="3"><font size="3"><code><font size="2">expression : compareExpr;<br>
</font></code><code><font size="2">compareExpr : sumExpr( ( GREATER | LESS | EQUAL | NOTEQUAL | GREATEREQUAL | LESSEQUAL) sumExpr | );<br>

  sumExpr : prodExpr ( ( PLUS | MINUS ) prodExpr )*;<br>
</font></code><code><font size="2">prodExpr : powExpr ( ( MUL | DIV</font> <font size="2">| MOD ) powExpr )*;<br>

  powExpr : atom( POW atom|);<br>

  atom: ( NUMBER | scoped_id | definition | STRING_LITERAL | boolean_keywords | LPAREN compareExpr RPAREN);<br>

  scoped_id : ID ( DOT ( ID | "INNER") )*;<br>

  <br>

  definition : "IntPMF" SQUARE_PAREN_L ( numeric_int_sample )+ SQUARE_PAREN_R<br>

  | "DoublePMF" SQUARE_PAREN_L ( numeric_real_sample )+ SQUARE_PAREN_R<br>

  | "EnumPMF" SQUARE_PAREN_L ( stringsample )+ SQUARE_PAREN_R<br>

  | "DoublePDF" SQUARE_PAREN_L( real_pdf_sample )+ SQUARE_PAREN_R<br>

  | "BoolPMF" SQUARE_PAREN_L ( boolsample )+
  SQUARE_PAREN_R;</font></code></code></font></p>


  
<p align="left"><font face="Courier New" size="2">boolean_keywords: ( "false"| "true");<br>

  numeric_int_sample: LPAREN NUMBER SEMI NUMBER RPAREN;<br>

  numeric_real_sample: LPAREN NUMBER SEMI NUMBER RPAREN;<br>

  stringsample: LPAREN STRING_LITERAL SEMI NUMBER RPAREN;<br>

  real_pdf_sample: LPAREN NUMBER SEMI NUMBER RPAREN;<br>

  boolsample: LPAREN boolean_keywords SEMI NUMBER RPAREN</font><font face="Courier New" size="2">;<br>

  characterisation_keywords: ( "BYTESIZE" | "STRUCTURE" | "NUMBER_OF_ELEMENTS" | TYPE" | "VALUE");</font></p>


  

  
<h3>Lexer:</h3>
<p align="left"><span style="font-family: monospace;">mPLUS </span><span style="font-family: monospace;">| mMINUS </span><span style="font-family: monospace;">| mMUL </span><span style="font-family: monospace;">| mDIV </span><span style="font-family: monospace;">| mMOD </span><span style="font-family: monospace;">| mPOW </span><span style="font-family: monospace;">| mLPAREN </span><span style="font-family: monospace;">| mRPAREN </span><span style="font-family: monospace;">| mSEMI </span><span style="font-family: monospace;">| mDEFINITION </span><span style="font-family: monospace;">| mEQUAL </span><span style="font-family: monospace;">| mSQUARE_PAREN_L </span><span style="font-family: monospace;">| mSQUARE_PAREN_R </span><span style="font-family: monospace;">| mNUMBER </span><span style="font-family: monospace;">| mNOTEQUAL </span><span style="font-family: monospace;">| mGREATER </span><span style="font-family: monospace;">| mLESS </span><span style="font-family: monospace;">| mGREATEREQUAL </span><span style="font-family: monospace;">| mLESSEQUAL </span><span style="font-family: monospace;">| mSTRING_LITERAL </span><span style="font-family: monospace;">| mDOT </span><span style="font-family: monospace;">| mID </span><span style="font-family: monospace;">| mWS&nbsp;</span></p>
<p align="left"><span style="font-family: monospace;"></span><span style="font-family: monospace;">mPLUS</span><span style="font-family: monospace;">:&rsquo;+&rsquo;</span><span style="font-family: monospace;">; </span><span style="font-family: monospace;">mMINUS</span><span style="font-family: monospace;">:&rsquo;-&rsquo;</span><span style="font-family: monospace;">; </span><span style="font-family: monospace;">mMUL:</span><span style="font-family: monospace;">&rsquo;*&rsquo;</span><span style="font-family: monospace;">; </span><span style="font-family: monospace;">mDIV:&rsquo;/&rsquo;;
mMOD:&rsquo;%&rsquo;; mPOW:&rsquo;&circ;&rsquo;;
mLPAREN:&rsquo;(&rsquo;; mRPAREN:&rsquo;)&rsquo;;
mSEMI:&rsquo;;&rsquo;;&nbsp;DEFINITION:&rsquo;=&rsquo;; mEQUAL:"==";
mSQUARE_PAREN_L:&rsquo;[&rsquo;; mSQUARE_PAREN_R:&rsquo;]&rsquo;;&nbsp;</span></p>
<p align="left"><span style="font-family: monospace;">mDIGIT:&rsquo;0&rsquo;..&rsquo;9&rsquo;;&nbsp;<br>
mNUMBER: ( mDIGIT )+( &rsquo;.&rsquo; ( mDIGIT )+ | );<br>
mALPHA: &rsquo;a&rsquo;..&rsquo;z&rsquo;| &rsquo;A&rsquo;..&rsquo;Z&rsquo;;<br>
</span></p>
<p align="left"><span style="font-family: monospace;">mNOTEQUAL:"&lt;&gt;"; mGREATER:"&gt;"; mLESS:"&lt;"; mGREATEREQUAL:"&gt;="; mLESSEQUAL:"&lt;=";&nbsp;<br>
mSTRING_LITERAL:"\""( mALPHA | &rsquo;_&rsquo; )+ "\"";&nbsp;<br>
mDOT: &rsquo;.&rsquo;;&nbsp;<br>
mID:( mALPHA | &rsquo;_&rsquo;)+; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // variable ids<br>
mWS: ( &rsquo; &rsquo;| &rsquo;\t&rsquo;| &rsquo;\r&rsquo;| &rsquo;\n&rsquo;);&nbsp;&nbsp; &nbsp;// whitespace</span></p>
<p align="left"><span style="font-family: monospace;"></span><span style="font-family: monospace;"></span></p>

</body>
</html>
